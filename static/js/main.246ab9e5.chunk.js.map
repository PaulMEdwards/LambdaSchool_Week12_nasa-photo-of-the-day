{"version":3,"sources":["Media.js","App.js","index.js"],"names":["Media","props","data","console","log","media_type","url","endsWith","indexOf","videoid","b","lastIndexOf","e","substring","extractVideoID","hdurl","concat","document","body","style","backgroundColor","background","backgroundSize","transition","height","overflow","react_default","a","createElement","Fragment","className","title","frameBorder","width","src","apiuri","apikey","App","_useState","useState","Date","_useState2","Object","slicedToArray","reqDate","setRequestDate","_useState3","_useState4","apodData","setAPODdata","useEffect","_fetchAPODmedia","asyncToGenerator","regenerator_default","mark","_callee","date","wrap","_context","prev","next","Axios","get","formatDate","then","d","catch","stop","apply","this","arguments","_x","fetchAPODmedia","Media_Media","onClick","t","getElementsByClassName","l","length","i","classList","toggle","x","getAttribute","text","textContent","contains","setAttribute","toggleHidden","accessKey","setDate","getDate","react_datepicker_min_default","selected","onChange","todayButton","maxDate","showMonthDropdown","showYearDropdown","dropdownMode","dateFormat","explanation","copyright","separator","undefined","month","getMonth","day","year","getFullYear","join","ReactDOM","render","src_App","getElementById"],"mappings":"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","file":"static/js/main.246ab9e5.chunk.js","sourcesContent":["import React from \"react\";\n\nexport const Media = (props) => {\n  const { data } = props;\n\n  console.log('props: ', props);\n\n  console.log('data: ', data);\n  console.log('data.media_type: ', data.media_type);\n\n  // if (!document.readyState) return <h1 className=\"centerBoth\">Loading...</h1>;\n\n  if (data.media_type === \"video\") {\n    if (!data.url.endsWith('?rel=0') && data.url.indexOf('?') === -1) {\n      data.url = data.url+'?rel=0';\n    }\n    function extractVideoID() {\n      const b = data.url.lastIndexOf('/')+1;\n      const e = data.url.indexOf('?')\n      const s = e>b ? data.url.substring(b,e) : data.url.substring(b);\n      // console.log('data.url: ', data.url);\n      // console.log('b: ', b);\n      // console.log('e: ', e);\n      // console.log('s: ', s);\n      return s;\n    }\n  \n    function fetch_highest_res (videoid) {\n      // let resolutions = ['maxresdefault', 'hqdefault', 'mqdefault'];\n      // for (let i = 0; i < resolutions.length; i++) {\n      //   let imgUrl = `https://i.ytimg.com/vi/${videoid}/${resolutions[i]}.jpg`;\n      //   //download imgUrl magic\n      //   const imgUrlDownloaded = 'magic';\n      //   const w = imgUrlDownloaded.naturalWidth;\n      //   const h = imgUrlDownloaded.naturalHeight;\n  \n      //   if (w > 0 && h > 0) {\n      //     data.hdurl = imgUrl;\n      //     break;\n      //   }\n      // }\n    }\n    // data.hdurl = fetch_highest_res(extractVideoID());\n\n    const videoid = extractVideoID();\n    // const res = 'maxresdefault';\n    const res = 'hqdefault';\n    data.hdurl = `https://i.ytimg.com/vi/${videoid}/${res}.jpg`;\n  }\n  \n  document.body.style.backgroundColor = 'black';\n  document.body.style.background = `url('${data.hdurl}') no-repeat center center fixed`;\n  document.body.style.backgroundSize = 'cover';\n  document.body.style.transition = 'all .5s cubic-bezier(0.6, -0.28, 0.735, 0.045)';\n  //Next 2 lines are to make it work on Android\n  document.body.style.height = '100vh';\n  document.body.style.overflow = 'hidden';\n\n  return (\n    /* jshint ignore:start */\n    <React.Fragment>\n      {\n        data.media_type === \"video\" ?\n          <React.Fragment>\n            <div className=\"backgroundMedia z-99\">\n              <iframe title=\"background\" frameBorder=\"0\" height=\"100%\" width=\"100%\"\n                src={data.url + \"&autoplay=1&hd=1&controls=0&autohide=1&loop=1\"}>\n              </iframe>\n            </div>\n          <div />\n          </React.Fragment>\n          :\n          <div />\n      }\n    </React.Fragment>\n    /* jshint ignore:end */\n  );\n};\n","import React, { useEffect, useState } from \"react\";\nimport DatePicker from \"react-datepicker\";\nimport Axios from \"axios\";\nimport { Media } from \"./Media\";\nimport \"./App.css\";\nimport \"react-datepicker/dist/react-datepicker.css\";\n\nconst apiuri = 'https://api.nasa.gov/planetary/apod?api_key=';\nconst apikey = 'atTa4ZcvFAWk5OejsYxGG7fnPhdzwOIBEfxe7qhj';\n\nfunction App() {\n  const [reqDate, setRequestDate] = useState(new Date());\n  const [apodData, setAPODdata] = useState([]);\n\n  useEffect(() => {\n    // console.log('run effect');\n\n    async function fetchAPODmedia(date) { // jshint ignore:line\n      // Fetch data\n      await Axios.get(`${apiuri}${apikey}&date=${formatDate(date)}`)\n        .then((d) => {\n          console.log('d.data: ', d.data);\n          setAPODdata(d.data);\n        })\n        .catch(e => {\n          console.log(e);\n        });\n    }\n\n    fetchAPODmedia(reqDate);\n  }, [reqDate]);\n\n  // console.log('apodData: ', apodData);\n\n  /* eslint-disable jsx-a11y/no-access-key */\n  return (\n    /* jshint ignore:start */\n    <div className=\"App centerWidth\">\n      <Media data={apodData} />\n      <div className=\"hideButton glowText z-100\" onClick={() => toggleHidden()} title=\"Hide text\" accessKey=\"h\">x</div>\n      <div>\n        <h1 className=\"title glowText toggle\">NASA Astronomy Picture of the Day</h1>\n        <button className=\"dateArrow glowText toggle z-10\" onClick={() => setRequestDate(new Date(reqDate.setDate(reqDate.getDate() - 1)))}>&lt;</button>\n        {/* https://reactdatepicker.com */}\n        <DatePicker className=\"datePicker glowText toggle z-10\" selected={reqDate} onChange={date => setRequestDate(date)} todayButton=\"Today\" maxDate={new Date()} showMonthDropdown showYearDropdown dropdownMode=\"select\" dateFormat=\"yyyy/MM/dd\" />\n        <button className=\"dateArrow glowText toggle z-10\" onClick={() => setRequestDate(new Date(reqDate.setDate(reqDate.getDate() + 1)))}>&gt;</button>\n        <br />\n        <div className=\"footer centerWidth toggle\">\n          <h2 className=\"glowText\">{apodData.title}</h2>\n          <h4 className=\"glowText\">{apodData.explanation}</h4>\n          {\n            apodData.copyright && <h5 className=\"glowText\">&copy; {apodData.copyright}</h5>\n          }\n        </div>\n      </div>\n    </div>\n    /* jshint ignore:end */\n  );\n}\n\nexport default App;\n\n\n//#region Helper Functions\nfunction toggleHidden() {\n  //Toggle hide class on target elements\n  let t = document.getElementsByClassName('toggle');\n  // console.log('t.classList before: ', t.classList);\n  let l = t.length;\n  for (let i = 0; i < l; i++) {\n    // console.log('t[i].classList before: ', t[i].classList);\n    t[i].classList.toggle('hide');\n    // console.log('t[i].classList after: ', t[i].classList);\n  }\n  // console.log('t.classList after: ', t.classList);\n\n  //Update hide control\n  let x = document.getElementsByClassName('hideButton')[0];\n  let title = x.getAttribute('title');\n  let text = x.textContent;\n  // console.log('title before: ', title);\n  if (t[0].classList.contains('hide')) {\n    title = \"Show text\";\n    text = \"+\";\n  } else {\n    title = \"Hide text\";\n    text = \"x\";\n  }\n  // console.log('title after: ', title);\n  x.setAttribute('title', title);\n  x.textContent = text;\n}\nfunction formatDate(date, separator = '-') {\n  var d = new Date(date),\n    month = '' + (d.getMonth() + 1),\n    day = '' + d.getDate(),\n    year = d.getFullYear();\n\n  if (month.length < 2)\n    month = '0' + month;\n  if (day.length < 2)\n    day = '0' + day;\n\n  return [year, month, day].join(separator);\n}\n//#endregion Helper Functions\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\")); // jshint ignore:line\n"],"sourceRoot":""}